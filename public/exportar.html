<!-- public/exportar.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Descargar Pel√≠culas CSV</title>
</head>
<body>
  <h2>üìΩÔ∏è Exportar listado de pel√≠culas</h2>
  <button onclick="descargarCSV()">üì• Descargar CSV</button>

  <script>
    async function descargarCSV() {
      const response = await fetch("/api/pelicula/exportar", {
        headers: {
          "Authorization": "Basic QWRtaW5TaXN0ZW1hOk1pUGFzc1NlZ3VyYTEyMw=="
        }
      });

      if (!response.ok) {
        alert("‚ùå Error al descargar CSV");
        return;
      }

      const blob = await response.blob();
      const url = window.URL.createObjectURL(blob);
      const link = document.createElement("a");
      link.href = url;
      link.download = "peliculas.csv";
      link.click();
    }
  </script>
</body>
</html>
